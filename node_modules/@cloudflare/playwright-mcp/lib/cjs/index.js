'use strict';

Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });

const mcp = require('agents/mcp');
const playwright = require('@cloudflare/playwright');
const index = require('./src/index.js');

function createMcpAgent(endpoint, options) {
  const cdpEndpoint = typeof endpoint === "string" ? endpoint : endpoint instanceof URL ? endpoint.toString() : playwright.endpointURLString(endpoint);
  const serverPromise = index.createServer({
    browser: "chromium",
    userDataDir: "/playwright/user-data",
    headless: true,
    cdpEndpoint,
    capabilities: ["core", "tabs", "pdf", "history", "wait", "files"],
    ...options
  });
  return class PlaywrightMcpAgent extends mcp.McpAgent {
    constructor() {
      super(...arguments);
      this.server = serverPromise;
    }
    async init() {
    }
  };
}

exports.createMcpAgent = createMcpAgent;
